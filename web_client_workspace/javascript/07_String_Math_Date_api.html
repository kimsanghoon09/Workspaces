<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>String | Math | Date API</title>
</head>
<body>
  <h1>String | Math | Date API</h1>

  <h2>String</h2>
  <button onclick="test1();">indexOf | lastIndexOf</button>
  <button onclick="test2();">substring | substr</button>
  <button onclick="test3();">charAt</button>
  <button onclick="test4();">replace</button>
  <button onclick="test5();">split</button>
  <button onclick="test6();">padStart | padEnd</button>
  <button onclick="test7()">@ì‹¤ìŠµë¬¸ì œ</button>
  <div class="result"></div>
  <script>
  function isLower(ch) {
    return (ch >= 'a' && ch <= 'z'); 
  }
  function isUpper(ch) {
    return (ch >= 'A' && ch <= 'Z');
  }
  function isAlpha(ch) {
    return isUpper(ch) || isLower(ch);
  }
  /**
   * @ì‹¤ìŠµë¬¸ì œ - ì‚¬ìš©ìë¡œ í•œì¤„ì„ ì…ë ¥ë°›ê³ , ë¬¸ìì—´ì—ì„œ ì•ŒíŒŒë²³ì˜ ê°œìˆ˜ë¥¼ ì„¸ì„œ ì¶œë ¥í•˜ì„¸ìš”. 
   * - propmpt ì‚¬ìš©í•  ê²ƒ.
   * - ì •ìƒì ìœ¼ë¡œ ì…ë ¥í•œ ê²½ìš°ë§Œ, .resultì— ì¶œë ¥
   * - ì…ë ¥í•˜ì‹  ë¬¸ìì—´ "ì•ˆë…•, Daveì•¼"ì—ì„œ ì•ŒíŒŒë²³ì˜ ê°œìˆ˜ëŠ” 4ê°œì…ë‹ˆë‹¤.
   * 
   */
  function test7() {
    const text = prompt("ì•„ë¬´ ë¬¸ìì—´ì´ë‚˜ ì…ë ¥í•˜ì„¸ìš”", "ì•„ë¬´.....abcde....ã…‹ã…‹ã…‹ã…‹");

    // ëª¨ë“  ê°’/ë³€ìˆ˜ëŠ” boolean ìë™í˜•ë³€í™˜ì´ ê°€ëŠ¥ 
    // - ê°’("abc", 123, -10, [], {})ì´ ì¡´ì¬í•˜ë©´ true
    // - ê°’('', 0, undefined, null)ì´ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ false
    if(text) {
      let cnt = 0;
      for(let i = 0; i < text.length; i++) {
        const ch = text[i];
        if(isAlpha(ch)) {
          cnt++;
        }
      }
      document.querySelector(".result").innerHTML = `<h2>ì…ë ¥í•˜ì‹  ë¬¸ìì—´ "${text}"ì—ì„œ ì•ŒíŒŒë²³ì˜ ê°œìˆ˜ëŠ” ${cnt}ê°œì…ë‹ˆë‹¤.</h2>`;
    }
    else {
      alert("ë¬¸ìì—´ì„ ì…ë ¥í•˜ì„¸ìš” ğŸ˜¡");
    }

  }
  /**
   * padStart(length, paddingStr) 
   * padEnd(length, paddingStr)
   */
  function test6() {
    console.log("23".padStart(5, "0")); // 00023
    console.log("23".padEnd(5, "0")); // 23000

    console.log((23).toString().padStart(5, "0"));
    const s = 23;
    console.log(s.toString().padStart(5, "0"));
  }

  /**
   * split(êµ¬ë¶„ì) ë¬¸ìì—´ì„ êµ¬ë¶„ìë¡œ ìª¼ê°œì„œ ë°°ì—´ë¡œ ë°˜í™˜
   */
  function test5() {
    const data = "ì‚¬ê³¼, ë³µìˆ­ì•„, ê°ì, ë°°, ì˜¤ì´";
    const arr = data.split(", ");
    console.log(arr);
  }

  /**
   * replace(ê²€ìƒ‰ì–´, ëŒ€ì²´ì–´)
   * - ìƒˆ ë¬¸ìì—´ì„ ë°˜í™˜(ê¸°ì¡´ ë¬¸ìì—´ì„ ìˆ˜ì •í•  ìˆ˜ ì—†ë‹¤. immutable)
   */
  function test4() {
    const str = "apple pineapple";

    console.log(str.replace('apple', 'ì‚¬ê³¼')); 
    console.log(str.replaceAll('apple', 'ì‚¬ê³¼')); // ecma2021 ì¶”ê°€ 
    console.log(str.replace(/apple/g, 'ì‚¬ê³¼'));

  }
  
  /**
   * chatAt(index)
   * jsì—ì„œëŠ” ëª¨ë“  ë¬¸ìì—´ì´ ë¬¸ìë°°ì—´ë¡œ ì²˜ë¦¬ ê°€ëŠ¥í•˜ë‹¤.
   * 
   */ 
  function test3() {
    const str = "Hello world"; // ['h', 'e', 'l', 'l', 'o', ' ', 'w', 'o', 'r', 'l', 'd']
    console.log(str.charAt(4));
    console.log(str[4]);
    console.log(str.charCodeAt(4)); // ì•„ìŠ¤í‚¤ì½”ë“œê°’

    for(let i = 0; i < str.length; i++) {
      console.log(str.charAt(i), str[i]);
    }
  }
  
  /**
   * substring(startIndex, endIndex) : startIndexë¶€í„° endIndexì „ê¹Œì§€ ì˜ë¼ë‚´ì„œ ë°˜í™˜
   * substr(startIndex, length) : startIndexë¶€í„° lengthê°œë§Œì¹˜ ì˜ë¼ë‚´ì„œ ë°˜í™˜
   * - ìƒˆ ë¬¸ìì—´ì„ ë°˜í™˜(ê¸°ì¡´ ë¬¸ìì—´ì„ ìˆ˜ì •í•  ìˆ˜ ì—†ë‹¤. immutable)
   */
  function test2() {
    const str = "ì•ˆë…•í•˜ì„¸ìš”, í™ê¸¸ë™ë‹˜";
    console.log(str.substring(7, 10));
    console.log(str.substring(7));
    console.log(str.substring(7, str.length));

    console.log(str.substr(7, 3));
    console.log(str.substr(7));
  }

  /**
   * indexOf
   * lastIndexOf
   */
  function test1() {
    const str = "Apple Samsung PineApple";
    console.log(str.indexOf('Sam')); // 6
    console.log(str.indexOf('XXX')); // -1
    console.log(str.indexOf('Apple')); // 0
    console.log(str.lastIndexOf('Apple')); // 18

    console.log(str.indexOf("ì‚¬ê³¼") > -1 ? "ì‚¬ê³¼ í¬í•¨" : "ì‚¬ê³¼ ë¯¸í¬í•¨");
  }
  </script>

  <h2>Math</h2>
  <button onclick="test8();">floor | ceil | round</button>
  <button onclick="test9();">random</button>
  <script>

  /**
   * Math.random() 
   * - 0.0ì´ìƒ 1.0ë¯¸ë§Œì˜ ì‹¤ìˆ˜ ë°˜í™˜
   */
  function test9() {
    const n = Math.random();
    console.log(n); 
    // 1 ~ 100ì‚¬ì´ì˜ ë‚œìˆ˜ ì¶œë ¥
    console.log(Math.floor(n * 100) + 1);

  }
  /**
   * Math.floor ì†Œìˆ˜ì ê¸°ì¤€ ë²„ë¦¼
   * Math.trunc ì†Œìˆ˜ì ê¸°ì¤€ ë²„ë¦¼
   * Math.ceil ì†Œìˆ˜ì ê¸°ì¤€ ì˜¬ë¦¼
   * Math.round ì†Œìˆ˜ì ê¸°ì¤€ ë°˜ì˜¬ë¦¼ 
   */
  function test8() {
    const num = 1234.56;
    console.log(Math.floor(num));
    console.log(Math.trunc(num));
    console.log(Math.ceil(num));
    console.log(Math.round(num));

    console.log(Math.floor(num * 10) / 10);
    console.log(Math.trunc(num * 10) / 10);
    console.log(Math.ceil(num * 10) / 10);
    console.log(Math.round(num * 10) / 10);    
  }
  </script>
  
  
  <style>
  .even {
    color: hotpink;
  }
  </style>
  <div id="ex">
    <button onclick="test13();">ì‹¤í–‰</button>
    <script>
    /**
     * @ì‹¤ìŠµë¬¸ì œ #exí•˜ìœ„ì˜ liíƒœê·¸ì— 1 ~ 100ì‚¬ì´ì˜ ë‚œìˆ˜ë¥¼ ëŒ€ì…í•˜ì„¸ìš”.
     * - ì§ìˆ˜ì¸ ê²½ìš°ë§Œ colorê°’ì„ hotpinkë¥¼ ë³€ê²½í•˜ì„¸ìš”.
     * - ë§¤ë²ˆ ë²„íŠ¼ì„ ëˆ„ë¥¼ë•Œë§ˆë‹¤ ì´ˆê¸°í™”ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
     */
    function test13() {
      const list = document.querySelectorAll("#ex li");
      for(let i = 0; i < list.length; i++) {
        const n = Math.floor(Math.random() * 100) + 1;
        list[i].innerHTML = n;
        list[i].classList.remove("even");
        if(n % 2 == 0)
          list[i].classList.add("even");
      }
    } 
    </script>
    <ul>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
    </ul>
  </div>




  <h2>Date</h2>
  <h3 id="clock"></h3>
  <button onclick="test10();">Date</button>
  <button onclick="test11();">Date2</button>
  <input type="datetime-local" name="when" id="when">
  <fieldset>
    <legend>d-dayê³„ì‚°ê¸°</legend>
    <input type="date" name="dday" id="dday">
    <button onclick="test12();">í™•ì¸</button>
    <div id="dday-result"></div>
  </fieldset>
  <script>
  /**
   * @ì‹¤ìŠµë¬¸ì œ 
   * - ì˜¤ëŠ˜ì€ D-5 ì…ë‹ˆë‹¤.
   * - ì˜¤ëŠ˜ì€ D-Day ì…ë‹ˆë‹¤.
   * - ì˜¤ëŠ˜ì€ D+100 ì…ë‹ˆë‹¤.
   */
  function test12() {
    const today = new Date();
    const dday = new Date(document.querySelector("#dday").value);
    const diff = (today - dday) / 1000 / 60 / 60 / 24; 
    console.log(diff);
    // ì§€ê¸ˆ - ë¯¸ë˜ : ìŒìˆ˜
    // ì§€ê¸ˆ - ê³¼ê±° : ì–‘ìˆ˜
    if(diff >= 0 && diff < 1) {
      console.log('ì˜¤ëŠ˜ì€ D-Dayì…ë‹ˆë‹¤.');
    }
    else {
      console.log(`ì˜¤ëŠ˜ì€ D${diff > 0 ? '+' : ''}${Math.floor(diff)}ì…ë‹ˆë‹¤.`);
    }
  }
  /**
   * @ì‹¤ìŠµë¬¸ì œ - í˜ì´ì§€ë¡œë”©ì‹œ #when í˜„ì¬ì‹œê° ì„¸íŒ…í•˜ê¸°
   */
  function init() {
    const d = new Date();
    function f(n) {
      return n.toString().padStart(2, '0');
    }
    when.value = `${d.getFullYear()}-${f(d.getMonth() + 1)}-${f(d.getDate())}T${f(d.getHours())}:${f(d.getMinutes())}`;
    
    console.log(d.toISOString());    // 2023-05-24T05:27:22.492Z
    console.log(d.toLocaleString()); // 2023. 5. 24. ì˜¤í›„ 2:27:42

  }
  init();


  /**
   * íŠ¹ì •ì‹œê°ì„ ê°€ì§„ Dateê°ì²´
   */
  function test11() {
    // const d = new Date(2023, 11, 25);
    // const d = new Date(2023, 11, 25, 1, 1, 1);
    // const d = new Date('2023-12-25T01:01:01');
    const d = new Date(when.value);
    console.log(d);

    // ë‚ ì§œ ì°¨ì´ êµ¬í•˜ê¸° 
    const today = new Date();
    const dday = new Date(2023, 5, 15);  
    // Unix Time(UTC Seconds) 1970-01-01 00:00:00ë¶€í„° íë¥¸ ë°€ë¦¬ì´ˆ 
    console.log(today.getTime(), dday.getTime(), dday.getTime() - today.getTime());  
    console.log(dday - today); // ë°€ë¦¬ì´ˆ ì°¨ì´

    const diff = (dday - today) / 1000 / 60 / 60 / 24; // ë°€ë¦¬ì´ˆ -> ì´ˆ -> ë¶„ -> ì‹œê°„ -> ì¼
    console.log(diff);
    console.log(`D-${Math.ceil(diff)}ì…ë‹ˆë‹¤.`)

    // ë°€ë¦¬ì´ˆì—°ì‚°
    console.log(Date.now());
    const dday2 = new Date(dday.getTime()); // ë°€ë¦¬ì´ˆë¥¼ ì¸ìë¡œ í•˜ëŠ” ìƒì„±ì ì§€ì›
  }
  /**
   * Date 
   * - ë‚ ì§œ/ì‹œê°ì„ ê´€ë¦¬í•˜ëŠ” ê°ì²´ 
   * - new Date() í˜„ì¬ì‹œê°ì„ ê°€ì§„ ê°ì²´ 
   * - new Date(year, month, date[, hour, minute, second])
   * - new Date(dateString)
   * - new Date(millis)
   */
  function test10() {
    const d = new Date();
    console.log(d);

    console.log(d.getFullYear());
    console.log(d.getMonth() + 1); // 0ì›” ~ 11ì›”ë¡œ ê´€ë¦¬ë˜ë¯€ë¡œ +1 ì²˜ë¦¬
    console.log(d.getDate());
    console.log(d.getHours());
    console.log(d.getMinutes());
    console.log(d.getSeconds());

    function f(n) {
      return n.toString().padStart(2, '0');
    }

    clock.innerHTML = `${d.getFullYear()}/${f(d.getMonth() + 1)}/${f(d.getDate())} 
                       ${f(d.getHours())}:${f(d.getMinutes())}:${f(d.getSeconds())}`;

    setTimeout(test10, 1000); // 1ì´ˆí›„ì— test10í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë¼.                   
  }
  </script>
  
  
</body>
</html>